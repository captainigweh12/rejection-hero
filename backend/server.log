+ exec gosu vibecode scripts/start --hot
Installing dependencies and generating Prisma client...
[0.03ms] ".env"
bun install v1.2.19 (aad3abea)

$ prisma generate
Environment variables loaded from .env
Prisma schema loaded from prisma/schema.prisma

âœ” Generated Prisma Client (v6.17.1) to ./generated/prisma in 281ms

Start by importing your Prisma Client (See: https://pris.ly/d/importing-client)

Tip: Need your database queries to be 1000x faster? Accelerate offers you that and more: https://pris.ly/tip-2-accelerate


Checked 760 installs across 702 packages (no changes) [1.71s]
Starting server in dev mode with hot reload...
$ NODE_ENV=development bun run --hot src/index.ts
Failed to find Response internal state key
âœ… Environment variables validated successfully
ğŸ” [Auth] Initializing Better Auth...
âœ… [Auth] Better Auth initialized
ğŸ”— [Auth] Base URL: https://preview-csuipnvqjxpr.share.sandbox.dev
ğŸŒ [Auth] Trusted origins: vibecode://, http://localhost:3000, http://localhost:8081, https://preview-csuipnvqjxpr.share.sandbox.dev
ğŸ”‘ [Auth] Google OAuth: Enabled
ğŸ“ [Upload] Uploads directory exists: /home/user/workspace/backend/uploads
ğŸ”§ Initializing Hono application...
ğŸ” Mounting Better Auth handler at /api/auth/*
ğŸ“ Serving static files from uploads/ directory
ğŸ“¤ Mounting upload routes at /api/upload
ğŸ“ Mounting sample routes at /api/sample
ğŸ‘¤ Mounting profile routes at /api/profile
ğŸ” Mounting discover routes at /api/discover
ğŸ‘† Mounting swipe routes at /api/swipe
ğŸ’• Mounting matches routes at /api/matches
ğŸ¯ Mounting quests routes at /api/quests
ğŸ“Š Mounting stats routes at /api/stats
ğŸ“¹ Mounting live routes at /api/live
ğŸ‘¥ Mounting friends routes at /api/friends
ğŸ’¬ Mounting messages routes at /api/messages
ğŸ˜ï¸  Mounting groups routes at /api/groups
ğŸ Mounting shared quests routes at /api/shared-quests
ğŸ““ Mounting journal routes at /api/journal
ğŸ“ Mounting posts routes at /api/posts
â° Mounting moments routes at /api/moments
âš™ï¸  Starting server...
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“ Environment: development
ğŸš€ Server is running on port 3000
ğŸ”— Base URL: http://localhost:3000
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“š Available endpoints:
  ğŸ” Auth:         /api/auth/*
  ğŸ“¤ Upload:       POST /api/upload/image
  ğŸ“ Sample:       GET/POST /api/sample
  ğŸ‘¤ Profile:      GET/POST /api/profile
  ğŸ” Discover:     GET /api/discover
  ğŸ‘† Swipe:        POST /api/swipe
  ğŸ’• Matches:      GET /api/matches
  ğŸ¯ Quests:       GET/POST /api/quests
  ğŸ“Š Stats:        GET /api/stats
  ğŸ“¹ Live:         GET/POST /api/live
  ğŸ‘¥ Friends:      GET/POST /api/friends
  ğŸ’¬ Messages:     GET/POST /api/messages
  ğŸ˜ï¸  Groups:       GET/POST /api/groups
  ğŸ SharedQuests: GET/POST /api/shared-quests
  ğŸ““ Journal:      GET/POST /api/journal
  ğŸ’š Health:       GET /health
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Failed to find Response internal state key
âœ… Environment variables validated successfully
ğŸ” [Auth] Initializing Better Auth...
âœ… [Auth] Better Auth initialized
ğŸ”— [Auth] Base URL: https://preview-csuipnvqjxpr.share.sandbox.dev
ğŸŒ [Auth] Trusted origins: vibecode://, http://localhost:3000, http://localhost:8081, https://preview-csuipnvqjxpr.share.sandbox.dev
ğŸ”‘ [Auth] Google OAuth: Enabled
ğŸ“ [Upload] Uploads directory exists: /home/user/workspace/backend/uploads
ğŸ”§ Initializing Hono application...
ğŸ” Mounting Better Auth handler at /api/auth/*
ğŸ“ Serving static files from uploads/ directory
ğŸ“¤ Mounting upload routes at /api/upload
ğŸ“ Mounting sample routes at /api/sample
ğŸ‘¤ Mounting profile routes at /api/profile
ğŸ” Mounting discover routes at /api/discover
ğŸ‘† Mounting swipe routes at /api/swipe
ğŸ’• Mounting matches routes at /api/matches
ğŸ¯ Mounting quests routes at /api/quests
ğŸ“Š Mounting stats routes at /api/stats
ğŸ“¹ Mounting live routes at /api/live
ğŸ‘¥ Mounting friends routes at /api/friends
ğŸ’¬ Mounting messages routes at /api/messages
ğŸ˜ï¸  Mounting groups routes at /api/groups
ğŸ Mounting shared quests routes at /api/shared-quests
ğŸ““ Mounting journal routes at /api/journal
ğŸ“ Mounting posts routes at /api/posts
â° Mounting moments routes at /api/moments
âš™ï¸  Starting server...
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“ Environment: development
ğŸš€ Server is running on port 3000
ğŸ”— Base URL: http://localhost:3000
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“š Available endpoints:
  ğŸ” Auth:         /api/auth/*
  ğŸ“¤ Upload:       POST /api/upload/image
  ğŸ“ Sample:       GET/POST /api/sample
  ğŸ‘¤ Profile:      GET/POST /api/profile
  ğŸ” Discover:     GET /api/discover
  ğŸ‘† Swipe:        POST /api/swipe
  ğŸ’• Matches:      GET /api/matches
  ğŸ¯ Quests:       GET/POST /api/quests
  ğŸ“Š Stats:        GET /api/stats
  ğŸ“¹ Live:         GET/POST /api/live
  ğŸ‘¥ Friends:      GET/POST /api/friends
  ğŸ’¬ Messages:     GET/POST /api/messages
  ğŸ˜ï¸  Groups:       GET/POST /api/groups
  ğŸ SharedQuests: GET/POST /api/shared-quests
  ğŸ““ Journal:      GET/POST /api/journal
  ğŸ’š Health:       GET /health
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

<-- GET /api/auth/get-session
--> GET /api/auth/get-session [32m200[0m 10ms
<-- GET /api/quests
--> GET /api/quests [32m200[0m 5ms
<-- GET /api/stats/weekly-forecast
<-- GET /api/stats
<-- GET /api/stats/reflection-prompt
--> GET /api/stats/weekly-forecast [32m200[0m 16ms
--> GET /api/stats/reflection-prompt [32m200[0m 3ms
--> GET /api/stats [32m200[0m 14ms
<-- GET /api/journal
--> GET /api/journal [32m200[0m 3ms
<-- GET /api/quests
--> GET /api/quests [32m200[0m 4ms
<-- GET /api/stats
<-- GET /api/stats/leaderboard
--> GET /api/stats [32m200[0m 3ms
--> GET /api/stats/leaderboard [32m200[0m 6ms
<-- GET /api/quests
<-- GET /api/stats
--> GET /api/stats [32m200[0m 3ms
--> GET /api/quests [32m200[0m 6ms
<-- GET /api/stats/leaderboard
--> GET /api/stats/leaderboard [32m200[0m 3ms
<-- POST /api/quests/cmhz45nwd0004m2b760jlq0tu/record
--> POST /api/quests/cmhz45nwd0004m2b760jlq0tu/record [32m200[0m 90ms
<-- GET /api/quests
--> GET /api/quests [32m200[0m 3ms
<-- GET /api/stats/leaderboard
--> GET /api/stats/leaderboard [32m200[0m 4ms
<-- GET /api/stats
--> GET /api/stats [32m200[0m 2ms
<-- POST /api/quests/generate
Using OpenAI API to generate quest
Fetching nearby places for New York, NY at 40.66816594786997, -73.78548173306206
Found 10 nearby places
<-- POST /api/quests/generate
Using OpenAI API to generate quest
Fetching nearby places for New York, NY at 40.66816594786997, -73.78548173306206
Found 10 nearby places
<-- POST /api/quests/generate
Using OpenAI API to generate quest
Fetching nearby places for New York, NY at 40.66816594786997, -73.78548173306206
Found 10 nearby places
OpenAI API response: {
  "id": "chatcmpl-Cc1TRnQLe4gjF2dWSgLDFhCjjUUw4",
  "object": "chat.completion",
  "created": 1763178165,
  "model": "gpt-4o-mini-2024-07-18",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"title\": \"Negotiate Hotel Upgrades\",\n  \"description\": \"Visit the Best Western JFK Airport Hotel and ask the front desk for a complimentary room upgrade or additional amenities like free breakfast or late checkout. Be polite but persistent, and remember that collecting 'no' responses is part of the challenge!\",\n  \"category\": \"SALES\",\n  \"difficulty\": \"EXPERT\",\n  \"goalType\": \"COLLECT_NOS\",\n  \"goalCount\": 1,\n  \"location\": \"Best Western JFK Airport Hotel - 144-25 153rd Lane, Jamaica\",\n  \"latitude\": 40.665615,\n  \"longitude\": -73.784698\n}",
        "refusal": null,
        "annotations": []
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 2651,
    "completion_tokens": 141,
    "total_tokens": 2792,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": "fp_51db84afab"
}
<-- POST /api/quests/generate
Using OpenAI API to generate quest
Fetching nearby places for New York, NY at 40.66816594786997, -73.78548173306206
--> POST /api/quests/generate [32m200[0m 4s
Found 10 nearby places
<-- GET /api/quests
--> GET /api/quests [32m200[0m 4ms
<-- POST /api/quests/generate
Using OpenAI API to generate quest
Fetching nearby places for New York, NY at 40.66816594786997, -73.78548173306206
Found 10 nearby places
<-- POST /api/quests/cmhzqr9x10004m2v9zgmm51su/start
--> POST /api/quests/cmhzqr9x10004m2v9zgmm51su/start [32m200[0m 2ms
<-- GET /api/quests
--> GET /api/quests [32m200[0m 4ms
<-- POST /api/quests/generate
Using OpenAI API to generate quest
Fetching nearby places for New York, NY at 40.66816594786997, -73.78548173306206
Found 10 nearby places
OpenAI API response: {
  "id": "chatcmpl-Cc1TSBPaTGF2VWQpTR95hwdXByxbS",
  "object": "chat.completion",
  "created": 1763178166,
  "model": "gpt-4o-mini-2024-07-18",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"title\": \"Request Hotel Discounts\",\n  \"description\": \"Visit the Best Western JFK Airport Hotel and ask the front desk manager if they can offer you a discount on a room for the night. Itâ€™s a late Saturday night, so catch them during their quieter hours and be prepared for a 'no' response to build your confidence.\",\n  \"category\": \"SALES\",\n  \"difficulty\": \"EXPERT\",\n  \"goalType\": \"COLLECT_NOS\",\n  \"goalCount\": 1,\n  \"location\": \"Best Western JFK Airport Hotel - 144-25 153rd Lane, Jamaica\",\n  \"latitude\": 40.665615,\n  \"longitude\": -73.78469799999999\n}",
        "refusal": null,
        "annotations": []
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 2651,
    "completion_tokens": 151,
    "total_tokens": 2802,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": "fp_560af6e559"
}
--> POST /api/quests/generate [32m200[0m 4s
<-- GET /api/quests
--> GET /api/quests [32m200[0m 3ms
<-- POST /api/quests/cmhzqrbae0007m2v9b94p5dx5/start
--> POST /api/quests/cmhzqrbae0007m2v9b94p5dx5/start [33m400[0m 2ms
OpenAI API response: {
  "id": "chatcmpl-Cc1TTZMO2VCMLULYY4bUyp3wUldHq",
  "object": "chat.completion",
  "created": 1763178167,
  "model": "gpt-4o-mini-2024-07-18",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"title\": \"Pitch Hotel Managers\",\n  \"description\": \"Visit JFK Inn on South Conduit Avenue and request to set up a free promotional weekend event for local artists in their lobby. Approach the front desk and explain your idea, emphasizing the community benefits and asking if they would be interested in allowing you to use the space for free as a way to promote local talent.\",\n  \"category\": \"SALES\",\n  \"difficulty\": \"EXPERT\",\n  \"goalType\": \"COLLECT_NOS\",\n  \"goalCount\": 1,\n  \"location\": \"JFK INN- Hotel JFK Airport - 154-10 South Conduit Avenue, Jamaica\",\n  \"latitude\": 40.6661714,\n  \"longitude\": -73.78217029999999\n}",
        "refusal": null,
        "annotations": []
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 2651,
    "completion_tokens": 162,
    "total_tokens": 2813,
    "prompt_tokens_details": {
      "cached_tokens": 2560,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": "fp_560af6e559"
}
OpenAI API response: {
  "id": "chatcmpl-Cc1TUxyvXQnTbvjQtEplcaPDoUQIJ",
  "object": "chat.completion",
  "created": 1763178168,
  "model": "gpt-4o-mini-2024-07-18",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"title\": \"Negotiate Free Appetizers\",\n  \"description\": \"Go to John F. Kennedy International Airport and approach the bar staff at the Delta Sky Club. Ask them if they can provide you with a free appetizer suggestion from their menu, emphasizing that you're curious to know which one is their favorite but youâ€™re hesitant to order without a tip first.\",\n  \"category\": \"SALES\",\n  \"difficulty\": \"EXPERT\",\n  \"goalType\": \"COLLECT_NOS\",\n  \"goalCount\": 12,\n  \"location\": \"John F. Kennedy International Airport - Queens\",\n  \"latitude\": 40.6446124,\n  \"longitude\": -73.7797278\n}",
        "refusal": null,
        "annotations": []
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 2652,
    "completion_tokens": 147,
    "total_tokens": 2799,
    "prompt_tokens_details": {
      "cached_tokens": 1024,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": "fp_560af6e559"
}
--> POST /api/quests/generate [32m200[0m 4s
--> POST /api/quests/generate [32m200[0m 5s
<-- GET /api/quests
--> GET /api/quests [32m200[0m 4ms
<-- GET /api/quests
--> GET /api/quests [32m200[0m 4ms
<-- POST /api/quests/cmhzqrctn000dm2v95spea9v3/start
<-- POST /api/quests/cmhzqrcrq000am2v9xhm51ovo/start
--> POST /api/quests/cmhzqrctn000dm2v95spea9v3/start [33m400[0m 3ms
--> POST /api/quests/cmhzqrcrq000am2v9xhm51ovo/start [33m400[0m 2ms
OpenAI API response: {
  "id": "chatcmpl-Cc1TVmYWGzkvSr6evAeDm4FsVm9kW",
  "object": "chat.completion",
  "created": 1763178169,
  "model": "gpt-4o-mini-2024-07-18",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"title\": \"Request Free Delivery\",\n  \"description\": \"Visit JFK Inn - 154-10 South Conduit Avenue, Jamaica and ask the front desk if they can provide a complimentary delivery service to your room for snacks or drinks. This is a great way to face rejection while exploring the services offered by hotels at night.\",\n  \"category\": \"SALES\",\n  \"difficulty\": \"EXPERT\",\n  \"goalType\": \"COLLECT_NOS\",\n  \"goalCount\": 1,\n  \"location\": \"JFK INN- Hotel JFK Airport - 154-10 South Conduit Avenue, Jamaica\",\n  \"latitude\": 40.6661714,\n  \"longitude\": -73.78217029999999\n}",
        "refusal": null,
        "annotations": []
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 2652,
    "completion_tokens": 153,
    "total_tokens": 2805,
    "prompt_tokens_details": {
      "cached_tokens": 1024,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": "fp_51db84afab"
}
OpenAI API response: {
  "id": "chatcmpl-Cc1TVmKLUVAlaOviFh0uL5crQI9dq",
  "object": "chat.completion",
  "created": 1763178169,
  "model": "gpt-4o-mini-2024-07-18",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"title\": \"Request Free Refills\",\n  \"description\": \"Visit the 24-hour diner, JFK Inn Hotel on South Conduit Avenue, and ask your server if you can get a free refill on a drink. Be bold and ask for something unusual, like a special late-night milkshake flavor thatâ€™s not on the menu.\",\n  \"category\": \"SALES\",\n  \"difficulty\": \"EXPERT\",\n  \"goalType\": \"COLLECT_NOS\",\n  \"goalCount\": 12,\n  \"location\": \"JFK Inn Hotel - 154-10 South Conduit Avenue\",\n  \"latitude\": 40.6661714,\n  \"longitude\": -73.78217029999999\n}",
        "refusal": null,
        "annotations": []
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 2652,
    "completion_tokens": 149,
    "total_tokens": 2801,
    "prompt_tokens_details": {
      "cached_tokens": 1024,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": "fp_51db84afab"
}
--> POST /api/quests/generate [32m200[0m 6s
<-- GET /api/quests
--> GET /api/quests [32m200[0m 4ms
--> POST /api/quests/generate [32m200[0m 6s
<-- POST /api/quests/cmhzqrf3d000gm2v9vyusnpgi/start
--> POST /api/quests/cmhzqrf3d000gm2v9vyusnpgi/start [33m400[0m 2ms
<-- GET /api/quests
--> GET /api/quests [32m200[0m 4ms
<-- POST /api/quests/cmhzqrf8p000jm2v93xqia3zb/start
--> POST /api/quests/cmhzqrf8p000jm2v93xqia3zb/start [33m400[0m 2ms
