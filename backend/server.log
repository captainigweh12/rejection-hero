+ exec gosu vibecode scripts/start --hot
Installing dependencies and generating Prisma client...
[0.04ms] ".env"
bun install v1.2.19 (aad3abea)

$ prisma generate
Environment variables loaded from .env
Prisma schema loaded from prisma/schema.prisma

âœ” Generated Prisma Client (v6.17.1) to ./generated/prisma in 308ms

Start by importing your Prisma Client (See: https://pris.ly/d/importing-client)

Tip: Want to turn off tips and other hints? https://pris.ly/tip-4-nohints


Checked 760 installs across 702 packages (no changes) [1.58s]
Starting server in dev mode with hot reload...
$ NODE_ENV=development bun run --hot src/index.ts
Failed to find Response internal state key
âœ… Environment variables validated successfully
ğŸ” [Auth] Initializing Better Auth...
âœ… [Auth] Better Auth initialized
ğŸ”— [Auth] Base URL: https://preview-csuipnvqjxpr.share.sandbox.dev
ğŸŒ [Auth] Trusted origins: vibecode://, http://localhost:3000, http://localhost:8081, https://preview-csuipnvqjxpr.share.sandbox.dev
ğŸ”‘ [Auth] Google OAuth: Enabled
ğŸ“ [Upload] Uploads directory exists: /home/user/workspace/backend/uploads
ğŸ”§ Initializing Hono application...
ğŸ” Mounting Better Auth handler at /api/auth/*
ğŸ“ Serving static files from uploads/ directory
ğŸ“¤ Mounting upload routes at /api/upload
ğŸ“ Mounting sample routes at /api/sample
ğŸ‘¤ Mounting profile routes at /api/profile
ğŸ” Mounting discover routes at /api/discover
ğŸ‘† Mounting swipe routes at /api/swipe
ğŸ’• Mounting matches routes at /api/matches
ğŸ¯ Mounting quests routes at /api/quests
ğŸ“Š Mounting stats routes at /api/stats
ğŸ“¹ Mounting live routes at /api/live
ğŸ‘¥ Mounting friends routes at /api/friends
ğŸ’¬ Mounting messages routes at /api/messages
ğŸ˜ï¸  Mounting groups routes at /api/groups
ğŸ Mounting shared quests routes at /api/shared-quests
ğŸ““ Mounting journal routes at /api/journal
ğŸ“ Mounting posts routes at /api/posts
â° Mounting moments routes at /api/moments
âš™ï¸  Starting server...
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“ Environment: development
ğŸš€ Server is running on port 3000
ğŸ”— Base URL: http://localhost:3000
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“š Available endpoints:
  ğŸ” Auth:         /api/auth/*
  ğŸ“¤ Upload:       POST /api/upload/image
  ğŸ“ Sample:       GET/POST /api/sample
  ğŸ‘¤ Profile:      GET/POST /api/profile
  ğŸ” Discover:     GET /api/discover
  ğŸ‘† Swipe:        POST /api/swipe
  ğŸ’• Matches:      GET /api/matches
  ğŸ¯ Quests:       GET/POST /api/quests
  ğŸ“Š Stats:        GET /api/stats
  ğŸ“¹ Live:         GET/POST /api/live
  ğŸ‘¥ Friends:      GET/POST /api/friends
  ğŸ’¬ Messages:     GET/POST /api/messages
  ğŸ˜ï¸  Groups:       GET/POST /api/groups
  ğŸ SharedQuests: GET/POST /api/shared-quests
  ğŸ““ Journal:      GET/POST /api/journal
  ğŸ’š Health:       GET /health
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

<-- GET /api/live/active
--> GET /api/live/active [32m200[0m 21ms
Failed to find Response internal state key
âœ… Environment variables validated successfully
ğŸ” [Auth] Initializing Better Auth...
âœ… [Auth] Better Auth initialized
ğŸ”— [Auth] Base URL: https://preview-csuipnvqjxpr.share.sandbox.dev
ğŸŒ [Auth] Trusted origins: vibecode://, http://localhost:3000, http://localhost:8081, https://preview-csuipnvqjxpr.share.sandbox.dev
ğŸ”‘ [Auth] Google OAuth: Enabled
ğŸ“ [Upload] Uploads directory exists: /home/user/workspace/backend/uploads
ğŸ”§ Initializing Hono application...
ğŸ” Mounting Better Auth handler at /api/auth/*
ğŸ“ Serving static files from uploads/ directory
ğŸ“¤ Mounting upload routes at /api/upload
ğŸ“ Mounting sample routes at /api/sample
ğŸ‘¤ Mounting profile routes at /api/profile
ğŸ” Mounting discover routes at /api/discover
ğŸ‘† Mounting swipe routes at /api/swipe
ğŸ’• Mounting matches routes at /api/matches
ğŸ¯ Mounting quests routes at /api/quests
ğŸ“Š Mounting stats routes at /api/stats
ğŸ“¹ Mounting live routes at /api/live
ğŸ‘¥ Mounting friends routes at /api/friends
ğŸ’¬ Mounting messages routes at /api/messages
ğŸ˜ï¸  Mounting groups routes at /api/groups
ğŸ Mounting shared quests routes at /api/shared-quests
ğŸ““ Mounting journal routes at /api/journal
ğŸ“ Mounting posts routes at /api/posts
â° Mounting moments routes at /api/moments
âš™ï¸  Starting server...
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“ Environment: development
ğŸš€ Server is running on port 3000
ğŸ”— Base URL: http://localhost:3000
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“š Available endpoints:
  ğŸ” Auth:         /api/auth/*
  ğŸ“¤ Upload:       POST /api/upload/image
  ğŸ“ Sample:       GET/POST /api/sample
  ğŸ‘¤ Profile:      GET/POST /api/profile
  ğŸ” Discover:     GET /api/discover
  ğŸ‘† Swipe:        POST /api/swipe
  ğŸ’• Matches:      GET /api/matches
  ğŸ¯ Quests:       GET/POST /api/quests
  ğŸ“Š Stats:        GET /api/stats
  ğŸ“¹ Live:         GET/POST /api/live
  ğŸ‘¥ Friends:      GET/POST /api/friends
  ğŸ’¬ Messages:     GET/POST /api/messages
  ğŸ˜ï¸  Groups:       GET/POST /api/groups
  ğŸ SharedQuests: GET/POST /api/shared-quests
  ğŸ““ Journal:      GET/POST /api/journal
  ğŸ’š Health:       GET /health
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

<-- GET /api/live/active
--> GET /api/live/active [32m200[0m 12ms
<-- GET /api/auth/get-session
--> GET /api/auth/get-session [32m200[0m 7ms
<-- GET /api/quests
--> GET /api/quests [32m200[0m 4ms
<-- GET /api/stats
--> GET /api/stats [32m200[0m 4ms
<-- GET /api/quests
<-- GET /api/stats
--> GET /api/stats [32m200[0m 3ms
--> GET /api/quests [32m200[0m 6ms
<-- GET /api/stats/leaderboard
--> GET /api/stats/leaderboard [32m200[0m 10ms
<-- POST /api/quests/cmhzg2jse0004m2mjbladl6xn/record
--> POST /api/quests/cmhzg2jse0004m2mjbladl6xn/record [32m200[0m 36ms
<-- GET /api/quests
--> GET /api/quests [32m200[0m 4ms
<-- GET /api/stats/leaderboard
--> GET /api/stats/leaderboard [32m200[0m 3ms
<-- GET /api/stats
--> GET /api/stats [32m200[0m 2ms
<-- POST /api/quests/generate
Using OpenAI API to generate quest
Fetching nearby places for New York, NY at 40.66814856284084, -73.78549879994979
Found 10 nearby places
<-- POST /api/quests/generate
Using OpenAI API to generate quest
Fetching nearby places for New York, NY at 40.66814856284084, -73.78549879994979
Found 10 nearby places
<-- POST /api/quests/generate
Using OpenAI API to generate quest
Fetching nearby places for New York, NY at 40.66814856284084, -73.78549879994979
Found 10 nearby places
<-- POST /api/quests/generate
Using OpenAI API to generate quest
Fetching nearby places for New York, NY at 40.66814856284084, -73.78549879994979
Found 10 nearby places
<-- POST /api/quests/generate
Using OpenAI API to generate quest
Fetching nearby places for New York, NY at 40.66814856284084, -73.78549879994979
Found 10 nearby places
<-- POST /api/quests/generate
Using OpenAI API to generate quest
Fetching nearby places for New York, NY at 40.66814856284084, -73.78549879994979
Found 10 nearby places
OpenAI API response: {
  "id": "chatcmpl-Cc0tyZebNS7ujvPHYniglej4Ubua4",
  "object": "chat.completion",
  "created": 1763175966,
  "model": "gpt-4o-mini-2024-07-18",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"title\": \"Ask Late Night\",\n  \"description\": \"Visit the 24-hour diner 'Pancake House' in Queens and ask the staff if you can create your own unique pancake combination with any ingredients they allow. Then, once you've made your creation, ask them for a free cup of coffee to go with it.\",\n  \"category\": \"SOCIAL\",\n  \"difficulty\": \"EXPERT\",\n  \"goalType\": \"COLLECT_NOS\",\n  \"goalCount\": 12,\n  \"location\": \"Pancake House - 90-31 Queens Blvd, Queens\",\n  \"latitude\": 40.733149,\n  \"longitude\": -73.861792\n}",
        "refusal": null,
        "annotations": []
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 2647,
    "completion_tokens": 144,
    "total_tokens": 2791,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": "fp_560af6e559"
}
OpenAI API response: {
  "id": "chatcmpl-Cc0tybSeBBuVEF4uxL31Llf0DZPJU",
  "object": "chat.completion",
  "created": 1763175966,
  "model": "gpt-4o-mini-2024-07-18",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"title\": \"Request Late-Night Snacks\",\n  \"description\": \"Visit the 24-hour diner called 'Eleanor's Diner' on Broadway and ask the staff for a discount on your late-night snack. Be bold and see if you can negotiate a special price for a classic diner item like fries or a milkshake.\",\n  \"category\": \"SOCIAL\",\n  \"difficulty\": \"EXPERT\",\n  \"goalType\": \"COLLECT_NOS\",\n  \"goalCount\": 12,\n  \"location\": \"Eleanor's Diner - Broadway\",\n  \"latitude\": 40.7127753,\n  \"longitude\": -74.0059728\n}",
        "refusal": null,
        "annotations": []
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 2647,
    "completion_tokens": 140,
    "total_tokens": 2787,
    "prompt_tokens_details": {
      "cached_tokens": 2560,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": "fp_560af6e559"
}
OpenAI API response: {
  "id": "chatcmpl-Cc0tyrUumXzdXW9qFhCye3PL8wL6Z",
  "object": "chat.completion",
  "created": 1763175966,
  "model": "gpt-4o-mini-2024-07-18",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"title\": \"Request Late Night Menu\",\n  \"description\": \"Visit the 24-hour diner, Garden Inn & Suites on Baisley Boulevard, and ask the staff if they can prepare a dish that is not on the menu. This challenge will help you practice handling rejections while engaging with the late-night dining crowd.\",\n  \"category\": \"SOCIAL\",\n  \"difficulty\": \"EXPERT\",\n  \"goalType\": \"COLLECT_NOS\",\n  \"goalCount\": 1,\n  \"location\": \"Garden Inn & Suites - 151-20 Baisley Boulevard, Jamaica\",\n  \"latitude\": 40.6676385,\n  \"longitude\": -73.7864943\n}",
        "refusal": null,
        "annotations": []
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 2647,
    "completion_tokens": 147,
    "total_tokens": 2794,
    "prompt_tokens_details": {
      "cached_tokens": 2560,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": "fp_560af6e559"
}
--> POST /api/quests/generate [32m200[0m 5s
--> POST /api/quests/generate [32m200[0m 7s
--> POST /api/quests/generate [32m200[0m 6s
<-- GET /api/quests
--> GET /api/quests [32m200[0m 4ms
<-- GET /api/quests
--> GET /api/quests [32m200[0m 3ms
<-- GET /api/quests
--> GET /api/quests [32m200[0m 2ms
<-- POST /api/quests/cmhzpg6fx0004m2mb5jg7hxsz/start
--> POST /api/quests/cmhzpg6fx0004m2mb5jg7hxsz/start [32m200[0m 6ms
OpenAI API response: {
  "id": "chatcmpl-Cc0u0JAq62fBQcpBS5jqfNk7mBo6E",
  "object": "chat.completion",
  "created": 1763175968,
  "model": "gpt-4o-mini-2024-07-18",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"title\": \"Request Movie Discounts\",\n  \"description\": \"Go to AMC Theatres on 234 W 42nd St and ask the ticket clerk if they can offer you a discount on a movie ticket. Do this right before the 3:30 AM screening of a late-night film, and be ready for their response, whether itâ€™s a yes or a no!\",\n  \"category\": \"SOCIAL\",\n  \"difficulty\": \"EXPERT\",\n  \"goalType\": \"COLLECT_NOS\",\n  \"goalCount\": 1,\n  \"location\": \"AMC Theatres - 234 W 42nd St\",\n  \"latitude\": 40.756459,\n  \"longitude\": -73.98619\n}",
        "refusal": null,
        "annotations": []
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 2647,
    "completion_tokens": 151,
    "total_tokens": 2798,
    "prompt_tokens_details": {
      "cached_tokens": 2560,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": "fp_560af6e559"
}
<-- POST /api/quests/cmhzpg6h40007m2mbabevu3du/start
--> POST /api/quests/cmhzpg6h40007m2mbabevu3du/start [33m400[0m 2ms
<-- POST /api/quests/cmhzpg6hh000am2mbi1pttn8c/start
<-- GET /api/quests
--> POST /api/quests/cmhzpg6hh000am2mbi1pttn8c/start [33m400[0m 4ms
--> GET /api/quests [32m200[0m 4ms
OpenAI API response: {
  "id": "chatcmpl-Cc0u0OFAQxd7zdCT8r9NVKaxyXgBv",
  "object": "chat.completion",
  "created": 1763175968,
  "model": "gpt-4o-mini-2024-07-18",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"title\": \"Request Free Samples\",\n  \"description\": \"Visit the 24-hour diner, Chef's Special on 42nd Street, and ask the staff if you can try a sample of their famous pancakes for free. Be bold and even request a unique topping option they haven't advertised yet to increase your chances of getting a 'no' response.\",\n  \"category\": \"SOCIAL\",\n  \"difficulty\": \"EXPERT\",\n  \"goalType\": \"COLLECT_NOS\",\n  \"goalCount\": 12,\n  \"location\": \"Chef's Special - 42nd Street\",\n  \"latitude\": 40.7587,\n  \"longitude\": -73.9851\n}",
        "refusal": null,
        "annotations": []
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 2647,
    "completion_tokens": 143,
    "total_tokens": 2790,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": "fp_51db84afab"
}
--> POST /api/quests/generate [32m200[0m 5s
<-- GET /api/quests
--> GET /api/quests [32m200[0m 4ms
--> POST /api/quests/generate [32m200[0m 5s
OpenAI API response: {
  "id": "chatcmpl-Cc0u1IyhgKH1Ffx1gaI088MMpRSd3",
  "object": "chat.completion",
  "created": 1763175969,
  "model": "gpt-4o-mini-2024-07-18",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"title\": \"Ask Late-Night Diners\",\n  \"description\": \"Visit the 24-hour diner at JFK Airport and ask the staff if you can create a custom dessert that isnâ€™t on the menu. Then, challenge yourself to request a discount on that dessert since it's a special creation. Make sure to do this during the late-night shift when they might be less busy to encourage conversation.\",\n  \"category\": \"SOCIAL\",\n  \"difficulty\": \"EXPERT\",\n  \"goalType\": \"COLLECT_NOS\",\n  \"goalCount\": 2,\n  \"location\": \"JFK INN- Hotel JFK Airport - 154-10 South Conduit Avenue, Jamaica\",\n  \"latitude\": 40.6661714,\n  \"longitude\": -73.78217029999999\n}",
        "refusal": null,
        "annotations": []
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 2647,
    "completion_tokens": 167,
    "total_tokens": 2814,
    "prompt_tokens_details": {
      "cached_tokens": 2560,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": "fp_51db84afab"
}
<-- POST /api/quests/cmhzpg7bf000dm2mbdje2os58/start
--> POST /api/quests/cmhzpg7bf000dm2mbdje2os58/start [33m400[0m 3ms
<-- GET /api/quests
--> GET /api/quests [32m200[0m 3ms
<-- POST /api/quests/cmhzpg7rk000gm2mbxrgq57jd/start
--> POST /api/quests/cmhzpg7rk000gm2mbxrgq57jd/start [33m400[0m 2ms
--> POST /api/quests/generate [32m200[0m 5s
<-- GET /api/quests
--> GET /api/quests [32m200[0m 3ms
<-- POST /api/quests/cmhzpg84u000jm2mbu7gxvfvo/start
--> POST /api/quests/cmhzpg84u000jm2mbu7gxvfvo/start [33m400[0m 2ms
