+ exec gosu vibecode scripts/start --hot
Installing dependencies and generating Prisma client...
[0.04ms] ".env"
bun install v1.2.19 (aad3abea)

$ prisma generate
Environment variables loaded from .env
Prisma schema loaded from prisma/schema.prisma

âœ” Generated Prisma Client (v6.17.1) to ./generated/prisma in 290ms

Start by importing your Prisma Client (See: https://pris.ly/d/importing-client)

Tip: Need your database queries to be 1000x faster? Accelerate offers you that and more: https://pris.ly/tip-2-accelerate


Checked 760 installs across 702 packages (no changes) [1.75s]
Starting server in dev mode with hot reload...
$ NODE_ENV=development bun run --hot src/index.ts
Failed to find Response internal state key
âœ… Environment variables validated successfully
ğŸ” OPENAI_API_KEY from process.env: EXISTS
ğŸ” OPENAI_API_KEY in parsed: EXISTS
ğŸ” [Auth] Initializing Better Auth...
âœ… [Auth] Better Auth initialized
ğŸ”— [Auth] Base URL: https://preview-ugdfgagtcpqe.share.sandbox.dev
ğŸŒ [Auth] Trusted origins: vibecode://, http://localhost:3000, http://localhost:8081, https://preview-ugdfgagtcpqe.share.sandbox.dev
ğŸ”‘ [Auth] Google OAuth: Enabled
ğŸ“ [Upload] Uploads directory exists: /home/user/workspace/backend/uploads
ğŸ”§ Initializing Hono application...
ğŸ” Mounting Better Auth handler at /api/auth/*
ğŸ“ Serving static files from uploads/ directory
ğŸ“¤ Mounting upload routes at /api/upload
ğŸ“ Mounting sample routes at /api/sample
ğŸ‘¤ Mounting profile routes at /api/profile
ğŸ” Mounting discover routes at /api/discover
ğŸ‘† Mounting swipe routes at /api/swipe
ğŸ’• Mounting matches routes at /api/matches
ğŸ¯ Mounting quests routes at /api/quests
ğŸ“Š Mounting stats routes at /api/stats
ğŸ“¹ Mounting live routes at /api/live
ğŸ‘¥ Mounting friends routes at /api/friends
ğŸ’¬ Mounting messages routes at /api/messages
ğŸ˜ï¸  Mounting groups routes at /api/groups
ğŸ¯ Mounting group quests routes at /api/group-quests
ğŸ“¹ Mounting group live routes at /api/group-live
ğŸ Mounting shared quests routes at /api/shared-quests
ğŸ““ Mounting journal routes at /api/journal
ğŸ“ Mounting posts routes at /api/posts
â° Mounting moments routes at /api/moments
ğŸ”” Mounting notifications routes at /api/notifications
ğŸ“§ Mounting GoHighLevel routes at /api/gohighlevel
ğŸ« Mounting support routes at /api/support
ğŸ“ Mounting categories routes at /api/categories
âš™ï¸  Starting server...
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“ Environment: development
ğŸš€ Server is running on port 3000
ğŸ”— Base URL: http://localhost:3000
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“š Available endpoints:
  ğŸ” Auth:         /api/auth/*
  ğŸ“¤ Upload:       POST /api/upload/image
  ğŸ“ Sample:       GET/POST /api/sample
  ğŸ‘¤ Profile:      GET/POST /api/profile
  ğŸ” Discover:     GET /api/discover
  ğŸ‘† Swipe:        POST /api/swipe
  ğŸ’• Matches:      GET /api/matches
  ğŸ¯ Quests:       GET/POST /api/quests
  ğŸ“Š Stats:        GET /api/stats
  ğŸ“¹ Live:         GET/POST /api/live
  ğŸ‘¥ Friends:      GET/POST /api/friends
  ğŸ’¬ Messages:     GET/POST /api/messages
  ğŸ˜ï¸  Groups:       GET/POST /api/groups
  ğŸ SharedQuests: GET/POST /api/shared-quests
  ğŸ““ Journal:      GET/POST /api/journal
  ğŸ”” Notifications: GET /api/notifications
  ğŸ’š Health:       GET /health
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Failed to find Response internal state key
âœ… Environment variables validated successfully
ğŸ” OPENAI_API_KEY from process.env: EXISTS
ğŸ” OPENAI_API_KEY in parsed: EXISTS
ğŸ” [Auth] Initializing Better Auth...
âœ… [Auth] Better Auth initialized
ğŸ”— [Auth] Base URL: https://preview-ugdfgagtcpqe.share.sandbox.dev
ğŸŒ [Auth] Trusted origins: vibecode://, http://localhost:3000, http://localhost:8081, https://preview-ugdfgagtcpqe.share.sandbox.dev
ğŸ”‘ [Auth] Google OAuth: Enabled
ğŸ“ [Upload] Uploads directory exists: /home/user/workspace/backend/uploads
ğŸ”§ Initializing Hono application...
ğŸ” Mounting Better Auth handler at /api/auth/*
ğŸ“ Serving static files from uploads/ directory
ğŸ“¤ Mounting upload routes at /api/upload
ğŸ“ Mounting sample routes at /api/sample
ğŸ‘¤ Mounting profile routes at /api/profile
ğŸ” Mounting discover routes at /api/discover
ğŸ‘† Mounting swipe routes at /api/swipe
ğŸ’• Mounting matches routes at /api/matches
ğŸ¯ Mounting quests routes at /api/quests
ğŸ“Š Mounting stats routes at /api/stats
ğŸ“¹ Mounting live routes at /api/live
ğŸ‘¥ Mounting friends routes at /api/friends
ğŸ’¬ Mounting messages routes at /api/messages
ğŸ˜ï¸  Mounting groups routes at /api/groups
ğŸ¯ Mounting group quests routes at /api/group-quests
ğŸ“¹ Mounting group live routes at /api/group-live
ğŸ Mounting shared quests routes at /api/shared-quests
ğŸ““ Mounting journal routes at /api/journal
ğŸ“ Mounting posts routes at /api/posts
â° Mounting moments routes at /api/moments
ğŸ”” Mounting notifications routes at /api/notifications
ğŸ“§ Mounting GoHighLevel routes at /api/gohighlevel
ğŸ« Mounting support routes at /api/support
ğŸ“ Mounting categories routes at /api/categories
âš™ï¸  Starting server...
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“ Environment: development
ğŸš€ Server is running on port 3000
ğŸ”— Base URL: http://localhost:3000
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“š Available endpoints:
  ğŸ” Auth:         /api/auth/*
  ğŸ“¤ Upload:       POST /api/upload/image
  ğŸ“ Sample:       GET/POST /api/sample
  ğŸ‘¤ Profile:      GET/POST /api/profile
  ğŸ” Discover:     GET /api/discover
  ğŸ‘† Swipe:        POST /api/swipe
  ğŸ’• Matches:      GET /api/matches
  ğŸ¯ Quests:       GET/POST /api/quests
  ğŸ“Š Stats:        GET /api/stats
  ğŸ“¹ Live:         GET/POST /api/live
  ğŸ‘¥ Friends:      GET/POST /api/friends
  ğŸ’¬ Messages:     GET/POST /api/messages
  ğŸ˜ï¸  Groups:       GET/POST /api/groups
  ğŸ SharedQuests: GET/POST /api/shared-quests
  ğŸ““ Journal:      GET/POST /api/journal
  ğŸ”” Notifications: GET /api/notifications
  ğŸ’š Health:       GET /health
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

<-- GET /api/auth/get-session
--> GET /api/auth/get-session [32m200[0m 12ms
<-- GET /api/stats
ğŸ” [Auth Middleware] GET /api/stats - User: kQLZbXvrT1aJpr0zdA5grO05cCPkyyOp
--> GET /api/stats [32m200[0m 4ms
<-- GET /api/stats/reflection-prompt
ğŸ” [Auth Middleware] GET /api/stats/reflection-prompt - User: kQLZbXvrT1aJpr0zdA5grO05cCPkyyOp
--> GET /api/stats/reflection-prompt [32m200[0m 5ms
<-- GET /api/stats/weekly-forecast
<-- GET /api/quests
<-- GET /api/profile
ğŸ” [Auth Middleware] GET /api/stats/weekly-forecast - User: kQLZbXvrT1aJpr0zdA5grO05cCPkyyOp
ğŸ” [Auth Middleware] GET /api/quests - User: kQLZbXvrT1aJpr0zdA5grO05cCPkyyOp
--> GET /api/stats/weekly-forecast [32m200[0m 8ms
--> GET /api/quests [32m200[0m 9ms
ğŸ” [Auth Middleware] GET /api/profile - User: kQLZbXvrT1aJpr0zdA5grO05cCPkyyOp
ğŸ‘¤ [Profile] GET request - User: kQLZbXvrT1aJpr0zdA5grO05cCPkyyOp
ğŸ” [Profile] Fetching profile for user kQLZbXvrT1aJpr0zdA5grO05cCPkyyOp
âœ… [Profile] Successfully fetched profile for user kQLZbXvrT1aJpr0zdA5grO05cCPkyyOp
--> GET /api/profile [32m200[0m 9ms
<-- GET /api/journal
ğŸ” [Auth Middleware] GET /api/journal - User: kQLZbXvrT1aJpr0zdA5grO05cCPkyyOp
--> GET /api/journal [32m200[0m 3ms
<-- GET /api/stats
<-- GET /api/profile
ğŸ” [Auth Middleware] GET /api/stats - User: kQLZbXvrT1aJpr0zdA5grO05cCPkyyOp
--> GET /api/stats [32m200[0m 4ms
ğŸ” [Auth Middleware] GET /api/profile - User: kQLZbXvrT1aJpr0zdA5grO05cCPkyyOp
ğŸ‘¤ [Profile] GET request - User: kQLZbXvrT1aJpr0zdA5grO05cCPkyyOp
ğŸ” [Profile] Fetching profile for user kQLZbXvrT1aJpr0zdA5grO05cCPkyyOp
âœ… [Profile] Successfully fetched profile for user kQLZbXvrT1aJpr0zdA5grO05cCPkyyOp
--> GET /api/profile [32m200[0m 4ms
<-- POST /api/quests/generate-map-quests
ğŸ” [Auth Middleware] POST /api/quests/generate-map-quests - User: kQLZbXvrT1aJpr0zdA5grO05cCPkyyOp
ğŸ—ºï¸ [Map Quests] Generating 5 quests near (40.68337213048553, -74.18633839028539) for user kQLZbXvrT1aJpr0zdA5grO05cCPkyyOp
ğŸ—ºï¸ [Map Quests] Found 10 nearby places
Using OpenAI API to generate quest
Fetching nearby places for Residence Inn by Marriott Newark Elizabeth/Liberty International Airport at 40.66354580000001, -74.1780744
Found 10 nearby places
OpenAI API response: {
  "id": "chatcmpl-CcUwAuKHhLwrvlt3StDAtH7nnC4Yi",
  "object": "chat.completion",
  "created": 1763291422,
  "model": "gpt-4o-mini-2024-07-18",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"title\": \"Request Hotel Partnerships\",\n  \"description\": \"Visit the Courtyard by Marriott Newark Elizabeth and ask the front desk manager if you can display promotional flyers for your local business in their lobby. This is a great way to connect with a potential partner and gain visibility for your services.\",\n  \"category\": \"SALES\",\n  \"difficulty\": \"HARD\",\n  \"goalType\": \"TAKE_ACTION\",\n  \"goalCount\": 1,\n  \"location\": \"Courtyard by Marriott Newark Elizabeth - 87 International Boulevard, Elizabeth\",\n  \"latitude\": 40.6628066,\n  \"longitude\": -74.17815689999999\n}",
        "refusal": null,
        "annotations": []
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 2967,
    "completion_tokens": 139,
    "total_tokens": 3106,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": "fp_51db84afab"
}
âœ… [Map Quests] Generated quest 1/5: Request Hotel Partnerships
Using OpenAI API to generate quest
Fetching nearby places for Fairfield by Marriott Inn & Suites Newark Liberty International Airport at 40.7095038, -74.17091309999999
Found 10 nearby places
OpenAI API response: {
  "id": "chatcmpl-CcUwFenajP0k5MEjTKc7JYHUP2n3z",
  "object": "chat.completion",
  "created": 1763291427,
  "model": "gpt-4o-mini-2024-07-18",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"title\": \"Request Free Breakfast\",\n  \"description\": \"Visit the DoubleTree by Hilton Hotel Newark Airport and ask the front desk if they have any complimentary breakfast options available for guests not staying there. Emphasize that you're hoping to enjoy a local breakfast experience while in the area.\",\n  \"category\": \"CAREER\",\n  \"difficulty\": \"EASY\",\n  \"goalType\": \"COLLECT_NOS\",\n  \"goalCount\": 1,\n  \"location\": \"DoubleTree by Hilton Hotel Newark Airport - 128 Frontage Road, Newark\",\n  \"latitude\": 40.7128433,\n  \"longitude\": -74.1642943\n}",
        "refusal": null,
        "annotations": []
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 2949,
    "completion_tokens": 139,
    "total_tokens": 3088,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": "fp_51db84afab"
}
âœ… [Map Quests] Generated quest 2/5: Request Free Breakfast
Using OpenAI API to generate quest
Fetching nearby places for Courtyard by Marriott Newark Elizabeth at 40.6628066, -74.17815689999999
Found 10 nearby places
OpenAI API response: {
  "id": "chatcmpl-CcUwKmjRKO7hF9Kl41nTokBePDkFq",
  "object": "chat.completion",
  "created": 1763291432,
  "model": "gpt-4o-mini-2024-07-18",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"title\": \"Pitch Coffee Shops\",\n  \"description\": \"Visit coffee shops like Starbucks on International Boulevard and pitch your idea for a monthly coffee subscription service. Ask the baristas if they would be willing to display flyers for your service on the counter or at the shop entrance.\",\n  \"category\": \"ENTREPRENEURSHIP\",\n  \"difficulty\": \"HARD\",\n  \"goalType\": \"TAKE_ACTION\",\n  \"goalCount\": 5,\n  \"location\": \"Starbucks - 87 International Boulevard\",\n  \"latitude\": 40.6628066,\n  \"longitude\": -74.1781569\n}",
        "refusal": null,
        "annotations": []
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 2970,
    "completion_tokens": 132,
    "total_tokens": 3102,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": "fp_51db84afab"
}
âœ… [Map Quests] Generated quest 3/5: Pitch Coffee Shops
Using OpenAI API to generate quest
Fetching nearby places for Newark Liberty International Airport Marriott at 40.6921206, -74.1814103
Found 10 nearby places
OpenAI API response: {
  "id": "chatcmpl-CcUwOk9BbvsIAJaZFfys33OtAxV2D",
  "object": "chat.completion",
  "created": 1763291436,
  "model": "gpt-4o-mini-2024-07-18",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"title\": \"Pitch Hotel Managers\",\n  \"description\": \"Visit the Newark Liberty International Airport Marriott and ask the front desk manager if they would be open to hosting a small local business event in their conference room. Present your idea for a networking event and inquire about the possibility of a discounted rate for the venue.\",\n  \"category\": \"ENTREPRENEURSHIP\",\n  \"difficulty\": \"HARD\",\n  \"goalType\": \"COLLECT_NOS\",\n  \"goalCount\": 1,\n  \"location\": \"Newark Liberty International Airport Marriott - 1 Hotel Road, Newark\",\n  \"latitude\": 40.6921206,\n  \"longitude\": -74.1814103\n}",
        "refusal": null,
        "annotations": []
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 2939,
    "completion_tokens": 146,
    "total_tokens": 3085,
    "prompt_tokens_details": {
      "cached_tokens": 1152,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": "fp_51db84afab"
}
âœ… [Map Quests] Generated quest 4/5: Pitch Hotel Managers
Using OpenAI API to generate quest
Fetching nearby places for SpringHill Suites by Marriott Newark Liberty International Airport at 40.7096243, -74.1700017
Found 10 nearby places
OpenAI API response: {
  "id": "chatcmpl-CcUwUz3omBFAyI9S7YGTQIgYO2553",
  "object": "chat.completion",
  "created": 1763291442,
  "model": "gpt-4o-mini-2024-07-18",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "{\n  \"title\": \"Compliment Hotel Staff\",\n  \"description\": \"Visit the SpringHill Suites by Marriott Newark Liberty International Airport and give genuine compliments to the front desk staff about their service. Highlight what you appreciate about their friendliness or attentiveness, and aim to uplift their day. Complete this task with at least five different staff members you encounter during your stay.\",\n  \"category\": \"SOCIAL\",\n  \"difficulty\": \"HARD\",\n  \"goalType\": \"TAKE_ACTION\",\n  \"goalCount\": 5,\n  \"location\": \"SpringHill Suites by Marriott Newark Liberty International Airport - 652 U.S. Route 1 1 and 9 South\",\n  \"latitude\": 40.7096243,\n  \"longitude\": -74.1700017\n}",
        "refusal": null,
        "annotations": []
      },
      "logprobs": null,
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 2987,
    "completion_tokens": 161,
    "total_tokens": 3148,
    "prompt_tokens_details": {
      "cached_tokens": 0,
      "audio_tokens": 0
    },
    "completion_tokens_details": {
      "reasoning_tokens": 0,
      "audio_tokens": 0,
      "accepted_prediction_tokens": 0,
      "rejected_prediction_tokens": 0
    }
  },
  "service_tier": "default",
  "system_fingerprint": "fp_51db84afab"
}
âœ… [Map Quests] Generated quest 5/5: Compliment Hotel Staff
ğŸ—ºï¸ [Map Quests] Successfully generated 5/5 quests
--> POST /api/quests/generate-map-quests [32m200[0m 27s
